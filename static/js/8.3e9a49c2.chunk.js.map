{"version":3,"sources":["components/List.js","pages/History.js"],"names":["Img","styled","img","StyledButton","Button","Name","div","H5","h5","Component","observer","HistoryStore","useStores","useEffect","reset","deleteImg","item","delete","bundleCopy","url","input","document","createElement","value","style","position","left","body","appendChild","focus","select","execCommand","message","success","error","removeChild","initialLoad","pageStart","loadMore","find","hasMore","isLoading","useWindow","dataSource","list","renderItem","Item","target","href","attributes","src","filename","type","onClick","bind","id","className","tip","History","List"],"mappings":"kgCAOA,IAAMA,EAAMC,IAAOC,IAAV,KAmBHC,EAAeF,YAAOG,IAAPH,CAAH,KAIZI,EAAOJ,IAAOK,IAAV,KAYJC,EAAKN,IAAOO,GAAV,KAwFOC,EAhFGC,aAAS,WAAO,IACxBC,EAAiBC,cAAjBD,aAERE,qBAAU,WACR,OAAO,WACLF,EAAaG,WAEd,IAEH,IAIMC,EAAY,SAACC,GACjBL,EAAaM,OAAOD,IAGhBE,EAAa,SAACC,GAClB,IAAIC,EAAQC,SAASC,cAAc,YACnCF,EAAMG,MAAQJ,EACdC,EAAMI,MAAMC,SAAW,WACvBL,EAAMI,MAAME,KAAO,UACnBL,SAASM,KAAKC,YAAYR,GAC1BA,EAAMS,QACNT,EAAMU,SACHT,SAASU,YAAY,SACtBV,SAASU,YAAY,QACrBC,IAAQC,QAAQ,6BAEhBD,IAAQE,MAAM,+FAGhBb,SAASM,KAAKQ,YAAYf,IAI5B,OACE,mCACE,cAAC,IAAD,CACAgB,aAAa,EACbC,UAAW,EACXC,SAhCa,WACf3B,EAAa4B,QAgCXC,SAAU7B,EAAa8B,WAAa9B,EAAa6B,QACjDE,WAAW,EALX,SAME,cAAC,IAAD,CACAC,WAAYhC,EAAaiC,KACzBC,WACE,SAAA7B,GAAI,OACF,eAAC,IAAK8B,KAAN,WACE,8BACA,mBAAGC,OAAO,SAASC,KAAMhC,EAAKiC,WAAW9B,IAAI8B,WAAW9B,IAAxD,SAA6D,cAACnB,EAAD,CAAKkD,IAAKlC,EAAKiC,WAAW9B,IAAI8B,WAAW9B,UAEtG,cAACd,EAAD,UACE,cAACE,EAAD,UAAKS,EAAKiC,WAAWE,aAEvB,8BACE,mBAAGJ,OAAO,SAASC,KAAMhC,EAAKiC,WAAW9B,IAAI8B,WAAW9B,IAAxD,SAA6D,cAAC,IAAD,CAAQiC,KAAK,OAAb,0CAE/D,8BACE,cAAC,IAAD,CAAQA,KAAK,SAASC,QAASnC,EAAWoC,KAAK,KAAMtC,EAAKiC,WAAW9B,IAAI8B,WAAW9B,KAApF,wCAIF,8BACE,cAAChB,EAAD,CAAciD,KAAK,UAAUC,QAAStC,EAAUuC,KAAK,KAAMtC,EAAKuC,IAAhE,8BAhBYvC,EAAKuC,KAJzB,SAyBG5C,EAAa8B,WAAa9B,EAAa6B,SACpC,qBAAKgB,UAAU,yBAAf,SACE,cAAC,IAAD,CAAMC,IAAI,kCC3GXC,UAXf,WACE,OACE,qCACE,oBAAIF,UAAU,eAAd,sCACA,qBAAKA,UAAU,WAAf,SACE,cAACG,EAAD","file":"static/js/8.3e9a49c2.chunk.js","sourcesContent":["import React,{ useEffect } from 'react';\r\nimport { useStores } from '../stores';\r\nimport { observer } from 'mobx-react';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport { List, Spin, Button, message } from 'antd';\r\nimport styled from 'styled-components';\r\n\r\nconst Img = styled.img`\r\nwidth: 140px;\r\nheight: 80px;\r\nobject-fit: contain;\r\n\r\ncursor: pointer;\r\ntransition: all 0.6s;\r\n@media (min-width: 768px){\r\n  &:hover{\r\n    transform: scale(1.2);\r\n  }\r\n}\r\n@media (max-width: 768px){\r\n  width: 100%;\r\n  height: auto;\r\n  max-height: 200px;\r\n}\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n  margin-left: 10px;\r\n`\r\n\r\nconst Name = styled.div`\r\n@media (min-width: 768px){\r\n  flex: 1;\r\n  word-break:break-all;\r\n}\r\n@media (max-width: 768px){\r\n  width: 100%;\r\n  padding: 10px 0;\r\n  margin: 0 auto;\r\n}\r\n`\r\n\r\nconst H5 = styled.h5`\r\npadding: 0 30px;\r\n@media (max-width: 768px){\r\n  padding:0;\r\n  text-align: center;\r\n}\r\n`\r\n\r\nconst Component = observer(() => {\r\n  const { HistoryStore } = useStores() \r\n\r\n  useEffect(()=>{\r\n    return ()=>{\r\n      HistoryStore.reset()\r\n    }\r\n  }, [])\r\n\r\n  const loadMore = () => {\r\n    HistoryStore.find()\r\n  }\r\n\r\n  const deleteImg = (item) =>{\r\n    HistoryStore.delete(item)\r\n  }\r\n\r\n  const bundleCopy = (url) => {\r\n    let input = document.createElement('textarea')\r\n    input.value = url\r\n    input.style.position = 'absolute';\r\n    input.style.left = '-9999px';\r\n    document.body.appendChild(input);\r\n    input.focus()\r\n    input.select()\r\n    if(document.execCommand('Copy')){\r\n      document.execCommand('Copy')\r\n      message.success('复制成功')\r\n    }else{\r\n      message.error('复制失败,请通过在线预览手动复制')\r\n      \r\n    }\r\n    document.body.removeChild(input);\r\n\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <InfiniteScroll\r\n      initialLoad={true}\r\n      pageStart={0}\r\n      loadMore={loadMore}\r\n      hasMore={!HistoryStore.isLoading && HistoryStore.hasMore}\r\n      useWindow={true}>\r\n        <List\r\n        dataSource={HistoryStore.list}\r\n        renderItem={\r\n          item => (\r\n            <List.Item key={item.id}>\r\n              <div >\r\n              <a target=\"_blank\" href={item.attributes.url.attributes.url}><Img src={item.attributes.url.attributes.url} /></a>\r\n              </div>\r\n              <Name>\r\n                <H5>{item.attributes.filename}</H5>\r\n              </Name>\r\n              <div>\r\n                <a target=\"_blank\" href={item.attributes.url.attributes.url}><Button type='link'>在线预览</Button></a>\r\n              </div>\r\n              <div>\r\n                <Button type=\"dashed\" onClick={bundleCopy.bind(null, item.attributes.url.attributes.url)}>\r\n                  复制链接\r\n                </Button>\r\n              </div>\r\n              <div>\r\n                <StyledButton type='primary' onClick={deleteImg.bind(null, item.id)}>删除</StyledButton>\r\n              </div>\r\n            </List.Item>\r\n          )\r\n        }>\r\n          {HistoryStore.isLoading && HistoryStore.hasMore && (\r\n              <div className=\"demo-loading-container\">\r\n                <Spin tip=\"加载中\"/>\r\n              </div>\r\n            )}\r\n        </List>\r\n      </InfiniteScroll>\r\n    </>\r\n  )\r\n})\r\n\r\nexport default Component","import React from \"react\";\r\nimport List from \"../components/List\";\r\n\r\nfunction History(){\r\n  return (\r\n    <>\r\n      <h1 className='bottomborder'>上传历史</h1>\r\n      <div className='list-box'>\r\n        <List></List>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default History"],"sourceRoot":""}