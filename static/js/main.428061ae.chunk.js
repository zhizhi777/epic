(this["webpackJsonpreact-epic"]=this["webpackJsonpreact-epic"]||[]).push([[2],{129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),o=n.n(i),c=n(20),a=n.n(c),s=n(13),u=n.p+"static/media/epic.d35e1462.png",l=n(36),p=n(7),b=n(14),j=n(131),f=n(71),h=n(75),O={tablet:"768px",laptop:"1024px",desktop:"1440px"};"(max-width: ".concat(O.mobile,")"),"(max-width: ".concat(O.tablet,")"),"(max-width: ".concat(O.laptop,")"),"(max-width: ".concat(O.desktop,")");function d(){var e=Object(s.a)(["\n  margin-left: 10px;\n\n"]);return d=function(){return e},e}function m(){var e=Object(s.a)(["\n  @media (min-width: 767px) { \n    margin-left: auto;\n  }\n"]);return m=function(){return e},e}function y(){var e=Object(s.a)(["\n  margin-left: auto;\n  padding:0 4px;\n  color: rgba(255,255,255,.9);\n"]);return y=function(){return e},e}function g(){var e=Object(s.a)(["\n  margin-left: auto;\n  padding:0 4px;\n  color: rgba(255,255,255,.8);\n  border: 1px solid rgba(255,255,255,.1);\n"]);return g=function(){return e},e}function x(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n"]);return x=function(){return e},e}function v(){var e=Object(s.a)(["\n  display: block;\n\n"]);return v=function(){return e},e}function w(){var e=Object(s.a)(["\n  color: #fff;\n  margin-left: 20px;\n  font-size: 14px;\n\n  &.active{\n    color:#1890ff;\n  }\n\n"]);return w=function(){return e},e}function U(){var e=Object(s.a)(["\n  height: 30px;\n"]);return U=function(){return e},e}function k(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  margin: 0 auto;\n  padding: 10px;\n  max-width: 68%;\n  \n  @media (max-width: 1440px){ \n    max-width: 72%;\n  }\n  @media (max-width: 1024px) { \n    max-width: 84%;\n  }\n  @media (max-width: 767px) { \n    max-width: 100%;\n    display: block;\n  }\n"]);return k=function(){return e},e}function P(){var e=Object(s.a)(["\n  background-color: rgba(0,0,0,0.1);\n  color: #fff;\n"]);return P=function(){return e},e}var F=b.a.header(P()),z=b.a.div(k()),D=b.a.img(U()),C=Object(b.a)(l.b)(w()),S=Object(b.a)(l.b)(v()),I=b.a.div(x()),L=b.a.div(g()),N=b.a.div(y()),q=b.a.div(m()),M=Object(b.a)(j.a)(d()),A=Object(h.a)((function(){var e=Object(f.a)(),t=e.UserStore,n=e.AuthStore,i=Object(p.f)(),o=function(){n.logOut()},c=function(){i.push("/login")},a=function(){i.push("/register")},s=!0,l=function(){var e=document.querySelector(".collapse"),t=document.querySelector(".colbox");s?(t.style.height=e.offsetHeight+50+"px",s=!1):(t.style.height="50px",s=!0)};return Object(r.jsx)(F,{children:window.screen.width>=768?Object(r.jsxs)(z,{children:[Object(r.jsx)(D,{src:u}),Object(r.jsxs)("nav",{children:[Object(r.jsx)(C,{to:"/",activeClassName:"active",exact:!0,children:"\u9996\u9875"}),Object(r.jsx)(C,{to:"/history",activeClassName:"active",children:"\u4e0a\u4f20\u5386\u53f2"}),Object(r.jsx)(C,{to:"/about",activeClassName:"active",children:"\u5173\u4e8e\u6211"})]}),Object(r.jsx)(q,{children:t.currentUser?Object(r.jsxs)(r.Fragment,{children:[t.currentUser.attributes.username,Object(r.jsx)(M,{type:"primary",onClick:o,children:"\u6ce8\u9500"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(M,{type:"primary",onClick:c,children:"\u767b\u5f55"}),Object(r.jsx)(M,{type:"primary",onClick:a,children:"\u6ce8\u518c"})]})})]}):Object(r.jsxs)(z,{className:"colbox",children:[Object(r.jsxs)(I,{children:[Object(r.jsx)(D,{src:u}),t.currentUser?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(N,{children:t.currentUser.attributes.username})}):Object(r.jsx)(r.Fragment,{}),Object(r.jsx)(L,{onClick:l,children:"\u4e09"})]}),Object(r.jsxs)("nav",{className:"collapse",onClick:l,children:[Object(r.jsx)(S,{to:"/",exact:!0,children:"\u9996\u9875"}),Object(r.jsx)(S,{to:"/history",children:"\u4e0a\u4f20\u5386\u53f2"}),Object(r.jsx)(S,{to:"/about",children:"\u5173\u4e8e\u6211"}),t.currentUser?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"danger",onClick:o,children:"\u6ce8\u9500"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{onClick:c,children:"\u767b\u5f55"}),Object(r.jsx)("div",{onClick:a,children:"\u6ce8\u518c"})]})]})]})})}));function H(){var e=Object(s.a)(["\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n  padding: 6px 10px;\n  background-color: rgba(255,255,255,.1);\n"]);return H=function(){return e},e}var R=b.a.footer(H());var T=function(){return Object(r.jsx)(R,{children:Object(r.jsx)("div",{children:"\u8bf7\u52ff\u4e0a\u4f20\u8fdd\u53cd\u4e2d\u56fd\u5927\u9646\u548c\u9999\u6e2f\u6cd5\u5f8b\u7684\u56fe\u7247\uff0c\u8fdd\u8005\u540e\u679c\u81ea\u8d1f."})})};var J=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{children:"loading..."})})},W=(n(128),n(129),o.a.lazy((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,346))}))),B=o.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,347))})),E=o.a.lazy((function(){return n.e(7).then(n.bind(null,343))})),G=o.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,336))})),K=o.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,337))}));var Q=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(A,{}),Object(r.jsx)("main",{children:Object(r.jsx)(i.Suspense,{fallback:Object(r.jsx)(J,{}),children:Object(r.jsxs)(p.c,{children:[Object(r.jsx)(p.a,{path:"/",exact:!0,component:W}),Object(r.jsx)(p.a,{path:"/history",component:B}),Object(r.jsx)(p.a,{path:"/about",component:E}),Object(r.jsx)(p.a,{path:"/login",component:G}),Object(r.jsx)(p.a,{path:"/register",component:K})]})})}),Object(r.jsx)(T,{})]})},X=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,338)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))};a.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(l.a,{children:Object(r.jsx)(Q,{})})}),document.getElementById("root")),X()},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n(0),i=n(12),o=n(27),c=n(28),a=n(4),s=(n(51),n(2)),u=n(18),l=n.n(u);l.a.init({appId:"2kn3uNRmbJ020gk4UEYl2Gti-gzGzoHsz",appKey:"quqhs0ykhyzpN2CXfWRTRnDW",serverURL:"https://2kn3unrm.lc-cn-n1-shared.com"});var p,b,j,f,h,O,d,m,y,g,x,v,w,U,k=function(e,t){var n=new u.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},P=function(e,t){return new Promise((function(n,r){u.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},F=function(){u.User.logOut()},z=function(){return u.User.current()},D=function(e,t){var n=new l.a.Object("Image"),r=new l.a.File(t,e);return n.set("filename",t),n.set("owner",u.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},C=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,o=new l.a.Query("Image");return o.include("owner"),o.equalTo("owner",u.User.current()),o.limit(i),o.skip(i*n),o.descending("createdAt"),new Promise((function(e,t){o.find().then((function(t){e(t)})).catch((function(e){t(e)}))}))},S=function(e){var t=l.a.Object.createWithoutData("Image",e);return new Promise((function(e,n){t.destroy().then((function(t){e(t)})).catch((function(e){n(e)}))}))},I=new(p=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",b,this),Object(s.l)(this),this.pullUser()}return Object(c.a)(e,[{key:"pullUser",value:function(){this.currentUser=z()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),b=Object(a.a)(p.prototype,"currentUser",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(p.prototype,"pullUser",[s.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(a.a)(p.prototype,"resetUser",[s.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),L=n(135),N=new(j=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"list",f,this),Object(i.a)(this,"isLoading",h,this),Object(i.a)(this,"hasMore",O,this),Object(i.a)(this,"page",d,this),this.limit=10,Object(s.l)(this)}return Object(c.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,C({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){L.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25\uff01")})).finally((function(){e.isLoading=!1}))}},{key:"delete",value:function(e){var t=this;S(e).then((function(n){L.b.success("\u5220\u9664\u6210\u529f"),t.list=t.list.filter((function(t){return t.id!==e}))})).catch((function(e){L.b.error("\u5220\u9664\u5931\u8d25")}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),f=Object(a.a)(j.prototype,"list",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(a.a)(j.prototype,"isLoading",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=Object(a.a)(j.prototype,"hasMore",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=Object(a.a)(j.prototype,"page",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(a.a)(j.prototype,"append",[s.f],Object.getOwnPropertyDescriptor(j.prototype,"append"),j.prototype),Object(a.a)(j.prototype,"find",[s.f],Object.getOwnPropertyDescriptor(j.prototype,"find"),j.prototype),Object(a.a)(j.prototype,"delete",[s.f],Object.getOwnPropertyDescriptor(j.prototype,"delete"),j.prototype),Object(a.a)(j.prototype,"reset",[s.f],Object.getOwnPropertyDescriptor(j.prototype,"reset"),j.prototype),j),q=new(m=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"filename",y,this),Object(i.a)(this,"file",g,this),Object(i.a)(this,"isUploading",x,this),Object(i.a)(this,"serverFile",v,this),Object(s.l)(this)}return Object(c.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){D(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){n(e),L.b.error("\u4e0a\u4f20\u5931\u8d25\uff01")})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.serverFile=null,this.isUploading=!1}}]),e}(),y=Object(a.a)(m.prototype,"filename",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=Object(a.a)(m.prototype,"file",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=Object(a.a)(m.prototype,"isUploading",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=Object(a.a)(m.prototype,"serverFile",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(m.prototype,"setFilename",[s.f],Object.getOwnPropertyDescriptor(m.prototype,"setFilename"),m.prototype),Object(a.a)(m.prototype,"setFile",[s.f],Object.getOwnPropertyDescriptor(m.prototype,"setFile"),m.prototype),Object(a.a)(m.prototype,"upload",[s.f],Object.getOwnPropertyDescriptor(m.prototype,"upload"),m.prototype),Object(a.a)(m.prototype,"reset",[s.f],Object.getOwnPropertyDescriptor(m.prototype,"reset"),m.prototype),m),M=new(w=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"values",U,this),Object(s.l)(this)}return Object(c.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){P(e.values.username,e.values.password).then((function(e){I.pullUser(),t(e)})).catch((function(e){switch(I.resetUser(),e.code){case-1:L.b.error("\u8bf7\u6c42\u5df2\u7ec8\u6b62\uff0c\u8bf7\u67e5\u770b\u7f51\u7edc\u8fde\u63a5");break;case 210:L.b.error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");break;case 211:L.b.error("\u7528\u6237\u4e0d\u5b58\u5728");break;case 219:L.b.error("\u767b\u5f55\u5931\u8d25\u6b21\u6570\u8d85\u8fc7\u9650\u5236\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5\uff0c\u6216\u8005\u901a\u8fc7\u5fd8\u8bb0\u5bc6\u7801\u91cd\u8bbe\u5bc6\u7801\u3002")}n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){I.pullUser(),t(e)})).catch((function(e){switch(I.resetUser(),e.code){case-1:L.b.error("\u8bf7\u6c42\u5df2\u7ec8\u6b62\uff0c\u8bf7\u67e5\u770b\u7f51\u7edc\u8fde\u63a5");break;case 202:L.b.error("\u7528\u6237\u540d\u5df2\u5b58\u5728")}n(e)}))}))}},{key:"logOut",value:function(){F(),I.resetUser(),N.reset(),q.reset()}}]),e}(),U=Object(a.a)(w.prototype,"values",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(a.a)(w.prototype,"setUsername",[s.f],Object.getOwnPropertyDescriptor(w.prototype,"setUsername"),w.prototype),Object(a.a)(w.prototype,"setPassword",[s.f],Object.getOwnPropertyDescriptor(w.prototype,"setPassword"),w.prototype),Object(a.a)(w.prototype,"login",[s.f],Object.getOwnPropertyDescriptor(w.prototype,"login"),w.prototype),Object(a.a)(w.prototype,"register",[s.f],Object.getOwnPropertyDescriptor(w.prototype,"register"),w.prototype),Object(a.a)(w.prototype,"logOut",[s.f],Object.getOwnPropertyDescriptor(w.prototype,"logOut"),w.prototype),w),A=Object(r.createContext)({AuthStore:M,UserStore:I,ImageStore:q,HistoryStore:N});window.stores={AuthStore:M,UserStore:I,ImageStore:q,HistoryStore:N};var H=function(){return Object(r.useContext)(A)}}},[[130,3,4]]]);
//# sourceMappingURL=main.428061ae.chunk.js.map